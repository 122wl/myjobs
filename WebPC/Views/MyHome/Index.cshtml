@model Web.Models.Test1Model
@{
    Layout = null;

}
<script src="~/Scripts/jquery-1.10.2.js"></script>

    <script type="text/javascript" src="~/Scripts/imageUpload/ajaxfileupload.js"></script>

<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Scripts/poshytip/tip-yellowsimple/tip-yellowsimple.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/poshytip/jquery.poshytip.min.js")" type="text/javascript"></script>

<script type="text/javascript">

    var autovalidate = function (value, document) {
        $(document).attr("data-val-autovalidate", "dddd");
        return false;
    }
    $(document).ready(function () {
        $("#ccc").click(function () {
            $.ajaxFileUpload({
                url: '/Myhome/SavePath',
                fileElementId: "file",
                dataType: "json",
                success: function (data, status) {
                    if(data.status)
                    {
                        alert("上传成功")
                    }
                    else
                    {
                        alert("没有上传成功的数据己经被下载！");
                        $("#abcdefghi").submit();
                    }
                }
                , error: function () {
                    alert("ERROR");
                },
                data: { p: 1 }
            });
        });
    });

   
</script>
@{
    string abcd = "<a>aaaa</a>";
}


    @*<div id="abcdE" selectname="['sheng','shi','xian']"  dataneedcheck  domdata-citys>

</div>
<div id="ccc" selectname="['sheng','shi','xian']" selectvalue="[]"  hasBrand  domdata-goodsclass>

</div>*@
    
    @*<input type="button"  value="恭恭敬敬恭恭敬敬恭恭敬敬恭恭敬敬恭恭敬敬工" onclick="ansyUpload()"/>*@

    

    @using (Ajax.BeginForm("../MyHome/Test", null, new AjaxOptions { HttpMethod = "post", OnSuccess = "CommentSuccess" }, new { enctype = "multipart/form-data", id = "CommentForm" }))
    {
        @Html.TextBoxFor(d=>d.Id)
      
        <input type="submit" value="保存" />
    }
        <div>@abcd</div>
    @*<form action="/myHome/DownLoadFile" id="abcdefghi"></form>
    <form>
        <input type="file" id="file" name="file" />

        <input type="button" id="ccc" value="保存" />
    </form>*@

   
    @*<form id="ic" onsuccess="aaaa" >

    </form>

    <input type="text" id="er" value="" />

    <input type="button" id="ok" value="ok" />
    <input type="button" id="hide" value="hide33333333333333333333333333" />
<input type="button" id="hide1" value="hide33333333333333333333333333" />

    <script type="text/javascript">
        
        $("#hide1").click(function () {
            $(this).O2OtipsShow({ eleid: "ok", content: "修改的哦" });
        });

        $("#ok").click(function () {
            $(this).O2OtipsShow({ eleid: $(this).attr("id") });
             //c= $("#er").poshytip({
             //   content: "听说错了1",  //错误内容
             //   showOn: 'none',
             //   alignTo: 'target',
             //   alignX: 'right',
             //   alignY: 'center',
             //   className: 'tip-yellowsimple',
             //   showTimeout: 100,
             //   offsetX: 5,
             //   offsetY: 0
             //});
             //c.poshytip('show');
        });
        $("#hide").click(function () {
            //c.poshytip('hide');
            $(this).O2OtipsHide({ eleid: "ok" });
        });

        var aaaa = function () { alert(1);}

        //异步上传图片
        function ansyUpload() {
            $.ajaxFileUpload({
                url: '/ImageFile/ImageUpload',
                fileElementId: "abcdefg",
                dataType: "json",
                success: function (data, status) {
                    alert(data.imageId);
                }
                ,error: function () {
                    alert("ERROR");
                },
                data: {p:1}
            });
        };
        


        function isImage(fileName)
        {
            //img.src.match(/\/(\w+\.(?:png|jpg|gif|bmp))$/i)[1]
            var regex = /\w+\.(?:BPM|JPG|JPEG|PNG|GIF|ICO|bpm|jpg|jpeg|png|gif|ico)/;
            var x = regex.exec(fileName)
            return x;
        }


        function fileChange(id)
        {

            var image=new Image();      
            var a = document.getElementById(id).files[0].size;
            //var 
            var fileName = document.getElementById(id).value;
           
            if (isImage(document.getElementById(id).value) != null)
            {
                alert("请选择图片格式的文件");
                return;
            }
            document.getElementById("path").innerHTML = "图片路径是：" + document.getElementById(id).value;

        }

        var CommentSuccess = function(xhr)
        {
            debugger;
        }

        var CommentBegin = function ()
        {
        }
    </script>*@
  


var Slider=function(t){function e(t){this.warp=t.dom,this.list=t.list,this.curNum=t.current,this.index=t.current,this.callBack=t.callBack,this.init(),this.index=t.current,this.renderDOM(),this.bindDOM()}return e.prototype.init=function(){this.radio=window.innerHeight/window.innerWidth,this.scaleW=window.innerWidth},e.prototype.renderDOM=function(){var e=this.radio,i=this.warp,s=this.list,n=s.length,a=this.scaleW;this.outer=document.createElement("ul"),this.outer.id="plate",this.bar=document.createElement("div"),this.loading=document.createElement("div"),this.bar.className="bar",this.loading.className="slider-loading",this.bar.innerHTML='<i class="icon-back"></i><p class="pageNum"><span class="curimg"></span><span>/</span><span class="count"></span></p><i class="icon-rubbish"></i>',this.loading.innerHTML='<i class="lft-load"></i><i class="rit-load"></i>';for(var r=0;n>r;r++){var l=document.createElement("li"),o=s[r];l.style.width=window.innerWidth+"px",r==this.curNum?l.style.webkitTransform="translate3d(0,0,0)":r<this.curNum?l.style.webkitTransform="translate3d(-"+(this.curNum-r)*a+"px,0,0)":r>this.curNum&&(l.style.webkitTransform="translate3d("+(r-this.curNum)*a+"px,0,0)"),l.innerHTML='<img src=" '+o.img+' " />',this.outer.appendChild(l)}this.outer.style.width=a+"px",i.style.height=window.innerHeight+"px",i.appendChild(this.outer),i.appendChild(this.bar),i.appendChild(this.loading),this.count=this.bar.getElementsByClassName("count"),this.count[0].innerHTML=n,this.curimg=this.bar.getElementsByClassName("curimg"),this.curimg[0].innerHTML=this.curNum+1;for(var h=i.getElementsByTagName("img"),d=(this.outer,this.bar),c=this.loading,r=0;n>r;r++){var u,m;u=h[r].naturalWidth,m=h[r].naturalHeight,m/u>e?h[r].height=window.innerHeight:h[r].width=window.innerWidth,r==n-1&&(t("#plate li").css({opacity:"1"}),d.style.opacity="1",c.style.display="none")}},e.prototype.bindDOM=function(){var t=(this.curNum,this),e=t.scaleW,i=t.outer,s=(t.list.length,this.warp.getElementsByClassName("icon-rubbish")[0]),n=this.warp.getElementsByClassName("icon-back")[0],a=function(e){t.startX=e.touches[0].pageX,t.offsetX=0,t.startTime=1*new Date},r=function(s){s.preventDefault(),t.offsetX=s.touches[0].pageX-t.startX;var n=i.getElementsByTagName("li"),a=t.index-1,r=a+3;for(a;r>a;a++)console.log(a),console.log(n[a]),n[a]&&(n[a].style.webkitTransform="translate3d("+((a-t.index)*e+t.offsetX)+"px,0,0)"),n[a]&&(n[a].style.webkitTransition="none")},l=function(){{var s=e/6,n=1*new Date;i.getElementsByTagName("li")}t.go(n-t.startTime>800?t.offsetX>=s?"-1":t.offsetX<-s?"+1":"0":t.offsetX>50?"-1":t.offsetX<-50?"+1":"0")},o=function(){var e=t.index;t.delitem=e;var s=t.list.length;if(1==t.list.length)for(;t.warp.hasChildNodes();)t.warp.removeChild(t.warp.firstChild);t.list.splice(e,1),e==s-1?(t.go("-1"),i.removeChild(i.getElementsByTagName("li")[e])):(t.go("+1",!0),i.removeChild(i.getElementsByTagName("li")[e]),t.index=t.index-1);t.callBack();t.count=t.bar.getElementsByClassName("count"),t.list.length&&(t.count[0].innerHTML=t.list.length)},h=function(){for(;t.warp.hasChildNodes();)t.warp.removeChild(t.warp.firstChild)};i.addEventListener("touchstart",a),i.addEventListener("touchmove",r),i.addEventListener("touchend",l),s.addEventListener("click",o),n.addEventListener("click",h)},e.prototype.go=function(e,i){var s,n=this.index,a=this.outer.getElementsByTagName("li"),r=a.length,l=this.scaleW;"number"==typeof e?s=n:"string"==typeof e&&(s=n+1*e),s>r-1?s=r-1:0>s&&(s=0),this.index=s,t(".curimg").html(i?s:s+1),a[s].style.webkitTransition="all .2s linear",a[s-1]&&(a[s-1].style.webkitTransition="all .2s linear"),a[s+1]&&(a[s+1].style.webkitTransition="all .2s linear"),a[s].style.webkitTransform="translate3d(0,0,0)",a[s-1]&&(a[s-1].style.webkitTransform="translate3d(-"+l+"px,0,0)"),a[s+1]&&(a[s+1].style.webkitTransform="translate3d("+l+"px,0,0)")},e}(jQuery);